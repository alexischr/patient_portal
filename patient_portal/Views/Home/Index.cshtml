@using PatientPortal.Models;
@model IList<PatientViewModel>

@helper GetValidateTag(PatientViewModel model)
    {
        if (model.Patient.IsComplete())
        {
          <img src="assets/images/green.svg" class="validation_ind" />
        }
        else
        {
             <img src="assets/images/red.svg" class="validation_ind" />
        }
    }
<script src="assets/js/jquery.simplemodal.js"> </script>
<div>
<div class="button" id="addpatient">@Html.ActionLink("Add Patient","AddPatient")</div>
    <h2>Patients</h2>
    </div>
    @foreach (var viewmodel in Model) {
        <div class="patients" id="@viewmodel.Patient.ID">
                 <a href="/Home/EditPatient/@viewmodel.Patient.ID">
                     <img src="assets/images/karmanos.jpg" class="sitelogo" />
                     @GetValidateTag(viewmodel)
                     <p>@viewmodel.Patient.ID</p></div>
    }

<div id="dialog" style="display: none"></div>
@section Scripts
{
    <script>
        $('.ui-widget-overlay').live('click touchstart',
               function () {
                   $("#dialog").dialog("close");
                   $("body").load("");
               });

        $(".patients").click(function (event, ui) {
            var idz = $(this).closest(".patients").attr("id");
            //load up 


        });

        $("#addpatient").click(function (event, ui) {
            //load up 

            $.get("Home/AddPatient", $.param({ }, true), function (data, status, XHR) {
                $("#dialog").html(data);
                $("#dialog").dialog({
                    modal: true, draggable: false, width: '800px', resizable: false, position: ['middle', 20]
                });

                $("#dialog").dialog('option', 'position', ['middle', 20]);

            });



        });


    </script>
    
}
   